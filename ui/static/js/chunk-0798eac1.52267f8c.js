(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0798eac1"],{1262:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("h5",[e._v("基本信息")]),n("cui-detail",{attrs:{config:e.detailConfig}}),n("h5",[e._v("人员列表")]),n("cui-table",{ref:"tableBuilder",attrs:{config:e.tableConfig,selectedRows:e.selectedRows},on:{"update:selectedRows":function(t){e.selectedRows=t},"update:selected-rows":function(t){e.selectedRows=t}}}),n("CreateStaff",{ref:"saveStaff",attrs:{orgId:e.orgId,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},onSubmit:function(t){return e.$refs.tableBuilder.loadData()}}})],1)},a=[],i=n("1da1"),o=(n("96cf"),n("b0c0"),n("24fd")),s=n("d282"),u=n("3e11"),l=(n("ed08"),{name:"OrgDetail",components:{CreateStaff:u["a"]},props:{},data:function(){var e=this,t=this.$createElement;return{detailConfig:{record:{},fields:[{label:"机构名",name:"name"},{label:"机构类型",name:"type"},{label:"简称",name:"shortname"},{label:"营业执照",name:"license"},{label:"联系人",name:"contactName"},{label:"地区",name:"region"},{label:"电话",name:"phone"},{label:"传真",name:"fax"},{label:"邮箱",name:"email"},{label:"排序",name:"sort_num"},{label:"状态",content:function(e){return t("span",[e.state?"正常":"禁用"])}},{label:"说明",name:"info",width:"100%"}]},tableConfig:{url:s["a"].staffList,selectable:!0,condition:{orgId:this.$route.query.id},fields:[{title:"手机/登录账户",name:"mobile"},{title:"姓名",width:"80px",content:function(n){return t("span",{class:"text-link",on:{click:function(){return e.$router.push("/teacher/profile?id="+n.id)}}},[n.name])}},{title:"邮箱",name:"email"},{title:"公司",name:"comName"},{title:"角色",name:"roleName"},{title:"状态",name:"state"}],actions:[{title:"编辑",click:function(t){e.dialogVisible=!0,e.$refs.saveStaff.initData(t)}}],topActions:[{title:"添加人员",type:"primary",icon:"el-icon-plus",click:function(){e.$refs.saveStaff.initData(),e.dialogVisible=!0}},{title:"删除",icon:"el-icon-delete",click:function(){handleDelete(deleteItems,e.selectedRows,(function(){return e.handleRequest()}))}}]},selectedRows:[],dialogVisible:!1,orgId:this.$route.query.id,formConfig2:{fields:[{label:"选择员工",name:"staffIds",type:"selectBox",code:"staff"}],rules:{staffIds:[{required:!0,message:"请选择员工"}]}},formVisible2:!1}},mounted:function(){this.loadInfo()},methods:{loadInfo:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["c"])(this.$route.query.id);case 2:t=e.sent,this.detailConfig.record=t;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}}),c=l,f=n("2877"),d=Object(f["a"])(c,r,a,!1,null,null,null);t["default"]=d.exports},"24fd":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return d}));var r=n("1da1"),a=(n("96cf"),n("b775")),i=n("d282");function o(e){return s.apply(this,arguments)}function s(){return s=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["a"])({url:i["a"].orgList,method:"get",params:t}));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["a"])({url:"/common/org/info",method:"get",params:{id:t}}));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function c(e){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["a"])({url:"/common/org/save",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["a"])({url:"/common/org/delete",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}},"3e11":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("cui-dialog",{attrs:{title:e.formData.id?"修改员工":"添加员工",visible:e.dialogVisible,width:"700px"},on:{"update:visible":function(t){e.dialogVisible=t},submit:e.formSubmit}},[n("cui-form",{ref:"formRef",attrs:{config:e.formConfig},on:{update:e.formUpdate}})],1)},a=[],i=n("1da1"),o=(n("96cf"),n("cf45")),s=n("9afb"),u=n("ed08"),l={id:"",name:"",mobile:"",birthday:"",gender:"未知",degree:"未知",school:"",hireDate:"",intro:""},c={name:"CreateTeacher",components:{},props:{visible:{type:Boolean,required:!0},orgId:{require:!0}},data:function(){return{lessonSetting:[],formConfig:{fields:[{label:"姓名",name:"name",type:"input"},{label:"电话/登录账号",name:"mobile",type:"input"},{label:"选择职位",name:"positionId",type:"dict",code:"position"},{label:"性别",name:"gender",type:"enum",code:"GenderEnum"},{label:"学历",name:"degree",type:"enum",code:"DegreeEnum"},{label:"生日",name:"birthday",type:"date"},{label:"毕业学校",name:"school",type:"input"},{label:"入职日期",name:"hireDate",type:"date"},{label:"上课费/节",name:"classFee",type:"number",append:"元"},{label:"助教费/节",name:"assistantFee",type:"number",append:"元"},{label:"简介",name:"intro",type:"textarea"},{label:"是否是管理者",name:"isManager",type:"switch",info:"管理者不会出现在师资列表里"}],rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],mobile:[{required:!0,message:"请输入电话",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"blur"}],positionId:[{required:!0,message:"请选择职位",trigger:"blur"}]}},formData:Object.assign({},l)}},computed:{dialogVisible:{get:function(){return!!this.visible},set:function(e){this.$emit("update:visible",e)}}},created:function(){},methods:{formUpdate:function(e){this.formData=e},formSubmit:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object.assign({},this.formData),t.orgId=this.orgId,e.next=4,Object(s["i"])(t);case 4:n=e.sent,Object(u["a"])(n)&&(this.$emit("update:visible",!1),this.$emit("onSubmit"),this.initData(),Object(o["e"])(n.msg,"success"));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"undefined"==typeof t&&(t=l),setTimeout((function(){n.$refs.formRef.setInitData(t)}),50);case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},f=c,d=n("2877"),m=Object(d["a"])(f,r,a,!1,null,null,null);t["a"]=m.exports}}]);